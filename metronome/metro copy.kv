#:kivy 1.0
#:import kivy kivy




BoxLayout:
    orientation: 'vertical'
    FloatLayout:
        pos_hint: {'center_y': 0.5, 'center_x': 0.5 }
        id: ball
        canvas:
            Color:
                rgba: 1, 1, 1, 0.5
            Ellipse:
                pos: (self.width * 0.5) - (self.width * 0.5 and (self.width * 0.5 if self.width * 0.5 <= 500 else 500)) / 2 , (self.height * 0.5) - (self.width * 0.5 and (self.width * 0.5 if self.width * 0.5 <= 500 else 500)) / 2
                size: self.width * 0.5 and (self.width * 0.5 if self.width * 0.5 <= 500 else 500), self.width * 0.5 and (self.width * 0.5 if self.width * 0.5 <= 500 else 500)
                angle_start: 0
                angle_end: 360
        Label:
            id: label
            status: '120'
            text: '{} BPM'.format(self.status)

    BoxLayout:
        size_hint_y: None
        height: '50sp'

        ToggleButton:
            id: btn1
            group: 'a'
            text: 'Start'

        ToggleButton:
            id: btn2
            group: 'a'
            text: 'Tap'
            allow_no_selection: False
            on_state: if self.state == 'down': label.status = self.text

        ToggleButton:
            id: btn3
            group: 'a'
            text: 'Set'
            allow_no_selection: False
            state: 'down'
            on_press: app.show_popup()



<CustomPopup>:
    size_hint: .5, .5
    auto_dismiss: False
    title:'set tempo'
    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        Label:
            text: 'set tempo'
            size_hint: 1, .25
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        TextInput:
            font_size: '24sp'
            size_hint: .95, .5
            height: '15sp'
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            id: tempo
            text:''
            multiline: False
            input_filter: 'int'
        Label:
            size_hint: 1, .25
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            text: 'set signature'
        TextInput:
            font_size: '24sp'
            size_hint: .95, .5
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            id: signature
            text:''
            multiline: False
            input_filter: 'int'
        Button:
            text: 'Ok'
            on_press:
                root.dismiss()
                app.change_tempo(tempo.text)
